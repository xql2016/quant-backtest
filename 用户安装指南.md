# 量化回测工作台 - 用户安装指南

## 🎯 适用人群

本指南适用于：
- 想要直接运行 Python 源码的用户
- 需要修改代码的开发者
- 有一定技术基础的用户

**如果你只想使用程序，建议使用打包好的 exe 版本（无需安装）！**

---

## 📋 系统要求

- Windows 10 或更高版本
- 至少 2GB 可用磁盘空间
- 网络连接（用于下载和获取数据）

---

## 🚀 快速开始（3步安装）

### 步骤1：安装 Python

#### 1.1 下载 Python

访问 Python 官网：https://www.python.org/downloads/

下载 **Python 3.9** 或更高版本（推荐 3.9-3.11）

#### 1.2 安装 Python

**⚠️ 重要：安装时务必勾选 "Add Python to PATH"**

![安装截图说明]
```
✅ Install launcher for all users
✅ Add Python 3.x to PATH  ← 必须勾选！
```

点击 "Install Now" 安装

#### 1.3 验证安装

打开 **命令提示符** (CMD)：
- 按 `Win + R`
- 输入 `cmd`
- 按回车

在命令提示符中输入：
```bash
python --version
```

如果显示类似 `Python 3.9.x`，说明安装成功！

---

### 步骤2：解压程序文件

将收到的程序压缩包解压到任意文件夹，例如：
```
C:\量化回测工作台\
```

---

### 步骤3：安装依赖包

#### 3.1 打开命令提示符

在程序文件夹中：
- 按住 `Shift` 键
- 右键点击空白处
- 选择"在此处打开 PowerShell 窗口"或"在此处打开命令窗口"

#### 3.2 安装依赖

输入以下命令并回车：
```bash
pip install -r requirements.txt
```

等待安装完成（可能需要 5-10 分钟）

---

## ▶️ 运行程序

### 方法1：使用启动脚本（推荐）

双击 `run_app.py` 或在命令行输入：
```bash
python run_app.py
```

程序会自动：
1. 启动服务
2. 打开浏览器
3. 显示应用界面

### 方法2：使用 Streamlit 命令

在命令行输入：
```bash
streamlit run 多策略可视化回测_小红书20260117.py
```

---

## ❓ 常见问题

### Q1: 提示 "python 不是内部或外部命令"

**原因：** Python 未添加到系统 PATH

**解决方案：**
1. 重新安装 Python，记得勾选 "Add Python to PATH"
2. 或手动添加环境变量：
   - 右键"此电脑" → 属性
   - 高级系统设置 → 环境变量
   - 在 Path 中添加 Python 安装路径

### Q2: 提示 "ModuleNotFoundError: No module named 'xxx'"

**原因：** 缺少依赖包

**解决方案：**
```bash
pip install -r requirements.txt
```

如果单独缺少某个包：
```bash
pip install 包名
```

### Q3: pip 安装很慢

**解决方案：** 使用国内镜像源

```bash
pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple
```

### Q4: 端口被占用

**现象：** 提示端口 8501 已被使用

**解决方案：**
1. 关闭其他 Streamlit 应用
2. 或修改端口：
   ```bash
   streamlit run 多策略可视化回测_小红书20260117.py --server.port 8502
   ```

### Q5: 浏览器没有自动打开

**解决方案：** 手动打开浏览器，访问：
```
http://localhost:8501
```

---

## 🔄 更新程序

如果收到新版本：
1. 替换 `.py` 文件
2. 检查 `requirements.txt` 是否有变化
3. 如有变化，重新运行：
   ```bash
   pip install -r requirements.txt
   ```

---

## 🛠️ 高级选项

### 使用虚拟环境（推荐）

创建独立的 Python 环境，避免包冲突：

```bash
# 创建虚拟环境
python -m venv venv

# 激活虚拟环境
# Windows CMD:
venv\Scripts\activate.bat
# Windows PowerShell:
venv\Scripts\Activate.ps1

# 安装依赖
pip install -r requirements.txt

# 运行程序
python run_app.py
```

### 后台运行

如果想让程序在后台运行：
```bash
pythonw run_app.py
```

---

## 📞 技术支持

遇到问题？请提供以下信息：
- Python 版本 (`python --version`)
- 操作系统版本
- 错误信息截图
- 安装了哪些包 (`pip list`)

---

## 💡 推荐使用方式

| 用户类型 | 推荐方式 |
|---------|---------|
| **普通用户** | 使用打包好的 exe 版本 |
| **技术用户** | 按本指南安装 Python 版本 |
| **开发者** | 使用虚拟环境 + 源码 |
| **团队协作** | 部署到 Streamlit Cloud |

---

## ✅ 安装成功标志

如果看到以下画面，说明安装成功：
- 命令窗口显示：`You can now view your Streamlit app in your browser`
- 浏览器自动打开，显示量化回测界面
- 可以选择市场、输入股票代码、选择策略

恭喜！开始使用吧！🎉

